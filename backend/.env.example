# Configuración del Backend - Sistema HC Emergencia
# Copiar este archivo como .env y completar con tus valores reales

# JWT Secret Key (cambiar en producción)
JWT_SECRET=TICS@2025

# Clave de cifrado para certificados .p12 en reposo (AES-256). Mínimo 16 caracteres.
FERME_ENCRYPTION_KEY=unaClaveSecretaDeAlMenos16Caracteres

# URL del Frontend
FRONTEND_URL=http://localhost:5173

# Configuración de Correo Electrónico (Gmail)
CORREO_APP=tu_correo@gmail.com
CORREO_PASS=tu_contraseña_de_aplicacion

# ============================================
# CONFIGURACIÓN DE BASE DE DATOS
# ============================================
# Modo de conexión:
#   AUTO   - Intenta primero TRABAJO, si falla intenta CASA (recomendado)
#   TRABAJO - Solo intenta conectar a la IP de la oficina
#   CASA   - Solo intenta conectar a la IP de Radmin VPN
DB_MODE=AUTO

# Credenciales de Base de Datos (comunes para ambos entornos)
DB_DIALECT=mariadb
DB_USER=TICS
DB_PASSWORD=TICS 20141
DB_PORT=3306
DB_NAME=SISA_EC

# Configuración TRABAJO
# IP de la oficina (cuando estás en TRABAJO)
DB_HOST_TRABAJO=172.16.1.248

# Configuración CASA (Túnel SSH)
# Host y puerto: 127.0.0.1:3308 (túnel: ssh -L 3308:172.16.1.248:3306 TICS@26.223.87.142)
# Ejecuta: npm run tunnel (desde la raíz del proyecto) antes de iniciar el servidor
DB_HOST_CASA=127.0.0.1
DB_PORT_CASA=3308
DB_PASSWORD_CASA=TICS20141

# ============================================
# INSTRUCCIONES DE USO:
# ============================================
# 1. Para trabajar en la OFICINA:
#    - Cambia DB_MODE=TRABAJO
#    - O deja DB_MODE=AUTO (intentará TRABAJO primero)
#
# 2. Para trabajar en CASA:
#    PASO 1: Abre una terminal y ejecuta el túnel SSH:
#            npm run tunnel
#            (Esto creará un túnel SSH en localhost:3308)
#    
#    PASO 2: En otra terminal, inicia el servidor:
#            npm run dev
#            (El servidor intentará conectar a localhost:3308 vía túnel SSH)
#    
#    - Cambia DB_MODE=CASA para forzar modo casa
#    - O deja DB_MODE=AUTO (intentará TRABAJO primero, si falla usará CASA)
#
# 3. Modo AUTO (recomendado):
#    - Intenta primero conectar a 172.16.1.248 (oficina)
#    - Si falla (timeout), automáticamente intenta con localhost:3308 (túnel SSH)
#    - IMPORTANTE: Si estás en casa, ejecuta "npm run tunnel" primero
#    - No necesitas cambiar nada, funciona automáticamente
